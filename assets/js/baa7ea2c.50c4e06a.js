"use strict";(globalThis.webpackChunkuxodocs=globalThis.webpackChunkuxodocs||[]).push([[9651],{1743:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/dataFromFilename_cover-df755d6c90f278567c0f4a66c0455c2e.png"},4289:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/dataFromFilename_map2025-f8542b831a0ca9134f36ab627ebdc1ec.png"},5912:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"cookbooks/data_from_filename","title":"Add data from file name","description":"Data from file name cover","source":"@site/docs/fast2/cookbooks/data_from_filename.md","sourceDirName":"cookbooks","slug":"/cookbooks/data_from_filename","permalink":"/uxodocs/docs/fast2/cookbooks/data_from_filename","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"worker","permalink":"/uxodocs/docs/fast2/tags/worker"},{"inline":true,"label":"json","permalink":"/uxodocs/docs/fast2/tags/json"},{"inline":true,"label":"javascript","permalink":"/uxodocs/docs/fast2/tags/javascript"},{"inline":true,"label":"boilerplate","permalink":"/uxodocs/docs/fast2/tags/boilerplate"}],"version":"current","frontMatter":{"draft":false,"title":"Add data from file name","date":"2022-11-10T00:00:00.000Z","tags":["worker","json","javascript","boilerplate"]},"sidebar":"docs","previous":{"title":"CSV source : a step further","permalink":"/uxodocs/docs/fast2/cookbooks/csvsource_further"},"next":{"title":"Datasets","permalink":"/uxodocs/docs/fast2/cookbooks/dataset_basics"}}');var o=a(4848),s=a(8453);const r={draft:!1,title:"Add data from file name",date:new Date("2022-11-10T00:00:00.000Z"),tags:["worker","json","javascript","boilerplate"]},i=void 0,d={},l=[{value:":face_with_raised_eyebrow: Where do we come from ?",id:"face_with_raised_eyebrow-where-do-we-come-from-",level:2},{value:"\ud83e\udd14 Where to go ?",id:"thinking-where-to-go-",level:2},{value:"\ud83d\ude80 Way to go !",id:"rocket-way-to-go-",level:2},{value:"\ud83e\uddea JavaScript elaboration",id:"test_tube-javascript-elaboration",level:3},{value:"\ud83c\udfc1 Result",id:"checkered_flag-result",level:3},{value:"\ud83d\udc4f Let&#39;s sum up",id:"clap-lets-sum-up",level:2}];function c(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"Data from file name cover",src:a(1743).A+"",width:"2064",height:"1165"})}),"\n",(0,o.jsx)(t.p,{children:"Times will happen when you will not be able to rely on side-file metadata documents to map onto the documents you are migrating. The data will be concatenated into the file name."}),"\n",(0,o.jsx)(t.p,{children:"Fortunatelly with Fast2, there is still a possibility to parse this file name and pull out the required metadata. Last step would be to tight them down into the document dataset."}),"\n",(0,o.jsx)(t.h2,{id:"face_with_raised_eyebrow-where-do-we-come-from-",children:":face_with_raised_eyebrow: Where do we come from ?"}),"\n",(0,o.jsxs)(t.p,{children:["For the educational aspect of this topic, let us consider a folder gathering several documents, all with the same format : ",(0,o.jsx)(t.code,{children:"<document-type>-<data1>-<data2>"}),"."]}),"\n",(0,o.jsx)(t.p,{children:"Our folder looks like this:"}),"\n",(0,o.jsx)("figure",{markdown:!0,children:(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-txt",children:"\u251c\u2500 folder-to-extract\n\u2502       \u251c\u2500 contract-123-ABC.pdf\n\u2502       \u251c\u2500 contract-346-DEF.pdf\n\u2502       \u2502             \n\u2502       \u251c\u2500 bill-123-ABC.pdf\n\u2502       \u251c\u2500 bill-346-DEF.pdf\n\u2502       \u2502 \n\u2502       \u251c\u2500 contract-123-ABC.pdf\n\u2502       \u251c\u2500 contract-346-DEF.pdf\n\u2502       \u2502             \n\u2502       \u251c\u2500 draft-123-ABC.pdf\n\u2502       \u251c\u2500 draft-346-DEF.pdf\n\u2502       \u2514\u2500 ...\n\u2514\u2500 ...\n"})})}),"\n",(0,o.jsxs)(t.h2,{id:"thinking-where-to-go-",children:["\ud83e\udd14"," Where to go ?"]}),"\n",(0,o.jsx)(t.p,{children:"At a glance, we are just 3 (major) steps away from having a PDF content in our punnet, with a basic dataset populated from the JSON metadata :"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsx)(t.li,{children:"Scan the parent folder and list all the documents with names to map,"}),"\n",(0,o.jsx)(t.li,{children:"Get the document path, and isolate the file name"}),"\n",(0,o.jsxs)(t.li,{children:["Parse the file name and attach the metadata to the ",(0,o.jsx)(t.a,{href:"/uxodocs/docs/fast2/getting-started/overall-concepts#dataset",children:"dataset"}),". For this example, data will be mapped onto the document dataset."]}),"\n"]}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsxs)(t.h2,{id:"rocket-way-to-go-",children:["\ud83d\ude80"," Way to go !"]}),"\n",(0,o.jsx)(t.p,{children:"Inside Fast2, the map design is now pretty straightforward, given our ideas are rather clear in terms of the overall order of the operations."}),"\n",(0,o.jsxs)(t.p,{children:["The map is even quite close to the 3 steps detailed earlier. The ",(0,o.jsx)(t.a,{href:"/uxodocs/docs/fast2/catalog/source#LocalSource",children:"LocalSource"})," task just needs to be given the path of the folders to deal with. This task will also identify the file name and attach the metadata to the document dataset."]}),"\n",(0,o.jsxs)(t.p,{children:["Then the ",(0,o.jsx)(t.a,{href:"/uxodocs/docs/fast2/catalog/transformer#JSTransform",children:"JSTranform"})," will retrieve the corresponding document path, and carry on with the data mapping."]}),"\n",(0,o.jsx)(t.p,{children:"That way, we end up with 4 tasks :"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.a,{href:"/uxodocs/docs/fast2/catalog/source#LocalSource",children:"LocalSource"}),", to collect the documents from local storage,"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.a,{href:"/uxodocs/docs/fast2/catalog/transformer#JSTransform",children:"JSTranform"}),", whose role will be to :",(0,o.jsx)("br",{}),"\n","1\ufe0f\u20e3"," parse the file name",(0,o.jsx)("br",{}),"\n","2\ufe0f\u20e3"," add the data to the dataset"]}),"\n"]}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"Map to build for data extraction",src:a(4289).A+"",width:"1459",height:"403"})}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsxs)(t.h3,{id:"test_tube-javascript-elaboration",children:["\ud83e\uddea"," JavaScript elaboration"]}),"\n",(0,o.jsxs)(t.p,{children:["Although the configuration of the first task can be easily guessed, the ",(0,o.jsx)(t.a,{href:"/uxodocs/docs/fast2/catalog/transformer#JSTransform",children:"JSTranform"})," final resulting script should look something like this :"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:'punnet.getDocuments().forEach(function (doc) {\n  // (1)\n  var filenameWithoutExtension = doc\n    .getDataSet()\n    .getData("fileName")\n    .getValue()\n    .split(".")[0];\n\n  // (2)\n  var data = filenameWithoutExtension.split("-");\n\n  // (3)\n  doc.getDataSet().addData("document-type", "String", data[0]);\n  doc.getDataSet().addData("data1", "String", data[1]);\n  doc.getDataSet().addData("data2", "String", data[2]);\n});\n'})}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["1\ufe0f\u20e3"," Get the filename, and remove the extension"]}),"\n",(0,o.jsxs)(t.li,{children:["2\ufe0f\u20e3"," Parse the filename with the separator character"]}),"\n",(0,o.jsxs)(t.li,{children:["3\ufe0f\u20e3"," Attach the data"]}),"\n"]}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)(t.p,{children:"Head out now to the Run screen, start your campaign and just... enjoy !"}),"\n",(0,o.jsxs)(t.h3,{id:"checkered_flag-result",children:["\ud83c\udfc1"," Result"]}),"\n",(0,o.jsx)(t.p,{children:"At the latest stage of your workflow, the document dataset is filled with the properties found in the JSON and integrated as metadata."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",metastring:"{17-19}",children:'{\n\t"punnetId": "document-123-ABC.pdf#1",\n\t"documents": [\n\t\t{\n\t\t\t"documentId": "document-123-ABC.pdf",\n\t\t\t"data": {\n\t\t\t\t"absolutePath": "C:\\\\samples\\\\document-123-ABC.pdf",\n\t\t\t\t"fileName": "document-123-ABC.pdf",\n\t\t\t\t"absoluteParentPath": "C:\\\\samples",\n\t\t\t\t"length": {\n\t\t\t\t\t"value": "18700"\n\t\t\t\t},\n\t\t\t\t"lastModified": {\n\t\t\t\t\t"value": "Mon Dec 27 14:10:47 CET 2021",\n\t\t\t\t\t"type": "Date"\n\t\t\t\t},\n\t\t\t\t"document-type": "document",\n\t\t\t\t"data1": "123",\n\t\t\t\t"data2": "ABC"\n\t\t\t},\n\t\t\t"contents": {\n\t\t\t\t"url": "C:\\\\samples\\\\document-123-ABC.pdf"\n\t\t\t},\n\t\t\t"folders": [...]\n\t\t}\n\t]\n}\n'})}),"\n",(0,o.jsxs)(t.h2,{id:"clap-lets-sum-up",children:["\ud83d\udc4f"," Let's sum up"]}),"\n",(0,o.jsxs)(t.p,{children:["We can bring this scenario further by mapping data from the parent folder(s). We would just need the document path, which can be retrieved easily, as explained in ",(0,o.jsx)(t.a,{href:"/uxodocs/docs/fast2/advanced/javascript",children:"the advanced section of how to handle the JS Tranform task"}),"."]}),"\n",(0,o.jsxs)(t.p,{children:["For a OS-proofed script (Linux or Windows have their own subtleties when it comes to paths), you may need to make sure the parsing is done correctly, by standardizing the folder-architecture-related special characters from the Windows ",(0,o.jsx)(t.code,{children:"\\"})," to a regular ",(0,o.jsx)(t.code,{children:"/"}),"."]}),"\n",(0,o.jsx)(t.p,{children:"If this use-case echoes your early needs, other tasks can be tied to this map to reach a higher level of complexity characteristic of real-world migration projects."})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,t,a)=>{a.d(t,{R:()=>r,x:()=>i});var n=a(6540);const o={},s=n.createContext(o);function r(e){const t=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);