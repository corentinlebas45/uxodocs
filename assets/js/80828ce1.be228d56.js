"use strict";(globalThis.webpackChunkuxodocs=globalThis.webpackChunkuxodocs||[]).push([[3620],{579:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/Dashboards-select-existing-index-cd5420334114bb351fb9858fb0e57c54.png"},1183:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/dashboards_create-index_3-3-7ae058de423614e88c8792a92fe1b53c.png"},1377:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/dashboards_query-filter-ba8e96e2a657b42a1f88d5891a53d165.png"},1642:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/Dashboards-choose-on-conflict-39bcba344b8662daef18a4062a040845.png"},1806:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>l,frontMatter:()=>o,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"components/dashboards","title":"Dashboards","description":"Since Fast2 stores every single byte of migration information into its internal database, using dashboard capabilities for intelligible and functional reports just comes in naturally.","source":"@site/docs/fast2/components/dashboards.md","sourceDirName":"components","slug":"/components/dashboards","permalink":"/uxodocs/docs/fast2/components/dashboards","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"The broker","permalink":"/uxodocs/docs/fast2/components/broker"},"next":{"title":"Internal database","permalink":"/uxodocs/docs/fast2/components/database"}}');var a=s(4848),i=s(8453);const o={},r="Dashboards",d={},c=[{value:":material-chart-bar: Configure the dashboards",id:"material-chart-bar-configure-the-dashboards",level:2},{value:"With or without",id:"with-or-without",level:3},{value:"Ports",id:"ports",level:3},{value:"Remote access to the dashboards",id:"remote-access-to-the-dashboards",level:3},{value:"What if the database port is changed ?",id:"what-if-the-database-port-is-changed-",level:3},{value:"Advanced use",id:"advanced-use",level:2},{value:"Create the index pattern",id:"create-the-index-pattern",level:3},{value:"Imports objects into the dashboards feature",id:'how-to-import data-toc-label="How to import"',level:3},{value:"Resource #1 : Exception table",id:'visualisation-exception-table data-toc-label="Exception table"',level:3},{value:"Resource #2 : Campaign success ratio",id:'visualisation-campaign-ration data-toc-label="Ratio per campaign"',level:3},{value:"Resource #3 : Processing speed per task",id:'visualisation-processing-speed data-toc-label="Processing speed"',level:3},{value:"Advanced filtering capabilities",id:"advanced-filtering-capabilities",level:3},{value:"Datatype conversions",id:"datatype-conversions",level:3},{value:"Step 1: Making the field accessible",id:"step-1-making-the-field-accessible",level:4},{value:"Step 2: The parsing script",id:"step-2-the-parsing-script",level:4},{value:":octicons-bug-24: Troubleshooting",id:"octicons-bug-24-troubleshooting",level:2},{value:":material-connection: Dashboards do not reach the database",id:'cannot-reach-db data-toc-label="Unable to access database"',level:3},{value:":material-lan-connect: Could not ping dashboard on port 1791",id:'port-not-showing data-toc-label="Unable to access dashboards"',level:3},{value:":material-web-remove: Connection refused when accessing the dashboards port",id:'connection-refused data-toc-label="Connection refused"',level:3},{value:"FAQ",id:"faq",level:2},{value:":octicons-question-24: Run Fast2 without dashboards",id:"octicons-question-24-run-fast2-without-dashboards",level:3},{value:":octicons-question-24: Access dashboard when not migrating",id:"octicons-question-24-access-dashboard-when-not-migrating",level:3},{value:":octicons-question-24: Dashboards do not reach the database",id:'cannot-reach-db data-toc-label="Unable to access database"',level:3},{value:":octicons-question-24: Could not ping dashboard on port 1791",id:'port-not-showing data-toc-label="Unable to access dashboards"',level:3}];function h(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"dashboards",children:"Dashboards"})}),"\n",(0,a.jsx)(t.p,{children:"Since Fast2 stores every single byte of migration information into its internal database, using dashboard capabilities for intelligible and functional reports just comes in naturally."}),"\n",(0,a.jsxs)(t.admonition,{type:"warning",children:[(0,a.jsx)(t.p,{children:"Prior to the v2.5, Fast2 was relying on Kibana for data vizualisation. This component has been dropped in favor of OpenSearch dashboards."}),(0,a.jsx)(t.p,{children:"However the configuration of these tools are very close (if not identical)."})]}),"\n",(0,a.jsx)(t.p,{children:":::"}),"\n",(0,a.jsxs)(t.p,{children:["The dashboard only communicates with the database (as illustrated in the ",(0,a.jsx)(t.a,{href:"/uxodocs/docs/fast2/getting-started/overall-concepts#architecture",children:"architecture section"}),")."]}),"\n",(0,a.jsx)(t.p,{children:"All the chart visualizations which can be built up with this add-on and integrated to the most advanced dashboards, solely serve one purpose: data digestion for tracking progress, by making now possible to follow edge-cases of a handful of documents lost in a week-long non-stopping flood, and building reports out of it."}),"\n",(0,a.jsx)(t.h2,{id:"material-chart-bar-configure-the-dashboards",children:":material-chart-bar: Configure the dashboards"}),"\n",(0,a.jsx)(t.p,{children:"Fast2 does not embed any dashboard by default. However, you can get the add-on through the same portal you downloaded the Fast2 binaries. Unzip the package at the root of Fast2 installation folder."}),"\n",(0,a.jsx)(t.p,{children:"This hierarchy will make Fast2 automatically start your dashboard."}),"\n",(0,a.jsx)(t.h3,{id:"with-or-without",children:"With or without"}),"\n",(0,a.jsx)(t.p,{children:"When Fast2 is booted up, it will by default look for the dashboard folder at the root of the installation folder. If they are unzipped in the right location, they will be started after the broker triggered the database startup."}),"\n",(0,a.jsxs)(t.p,{children:["In case no dashboard folder is found, this step will be skipped after a given number of retries (which you can find the in the ",(0,a.jsx)(t.code,{children:"./config/application.properties"})," file)."]}),"\n",(0,a.jsx)(t.p,{children:"The dashboards can still be disabled, even if they are available in the root folder of Fast2:"}),"\n",(0,a.jsx)(t.p,{children:'=== "v2.4-"'}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ini",metastring:'title="./config/application.properties"',children:"broker.kibana.embedded.enabled=true\n"})}),"\n",(0,a.jsx)(t.p,{children:'=== "v2.6+"'}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ini",metastring:'title="./config/application.properties"',children:"broker.dashboards.embedded.enabled=true\n"})}),"\n",(0,a.jsx)(t.h3,{id:"ports",children:"Ports"}),"\n",(0,a.jsxs)(t.p,{children:["By default, the dashboards are serve from the port ",(0,a.jsx)(t.strong,{children:"1791"}),"."]}),"\n",(0,a.jsx)(t.p,{children:"However they can be accessed on a different port, which you will have to highlight in 2 different places:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"This is required to start the add-on on another port:"}),"\n",(0,a.jsx)(t.p,{children:'=== "v2.4-"'}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ini",metastring:'title="./config/application.properties"',children:"broker.kibana.embedded.port=8888\n"})}),"\n",(0,a.jsx)(t.p,{children:'=== "v2.6+"'}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ini",metastring:'title="./config/application.properties"',children:"broker.dashboards.embedded.port=8888\n"})}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Fast2 should know where to send the user for the visualizations:"}),"\n",(0,a.jsx)(t.p,{children:'=== "v2.4-"'}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ini",metastring:'title="./kibana-X.Y.Z/config/kibana.yml"',children:"server.port=8888\n"})}),"\n",(0,a.jsx)(t.p,{children:'=== "v2.6+"'}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ini",metastring:'title="./opensearch-dashboards-X.Y.Z/config/opensearch_dashboards.yml"',children:"server.port=8888\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"remote-access-to-the-dashboards",children:"Remote access to the dashboards"}),"\n",(0,a.jsx)(t.p,{children:"If this port needs to be exposed and accessible from a different machine, the dashboard configuration must be configured to allow connections from remote users:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-yml",metastring:'title="./opensearch-dashboards-X.Y.Z/config/opensearch_dashboards.yml"',children:'server.host: "0.0.0.0"\n'})}),"\n",(0,a.jsx)(t.h3,{id:"what-if-the-database-port-is-changed-",children:"What if the database port is changed ?"}),"\n",(0,a.jsx)(t.p,{children:"To make sure the dashboards still reach the database, make sure the port is still up-to-date in the dashboards config file :"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-yml",metastring:'title="./opensearch-dashboards-X.Y.Z/config/opensearch_dashboards.yml"',children:'opensearch.hosts: ["http://localhost:1790"]\n'})}),"\n",(0,a.jsx)(t.h2,{id:"advanced-use",children:"Advanced use"}),"\n",(0,a.jsx)(t.h3,{id:"create-the-index-pattern",children:"Create the index pattern"}),"\n",(0,a.jsxs)(t.p,{children:["The visualizations created from the dashboards add-on needs to be attached to the ",(0,a.jsx)(t.code,{children:"f2_*"})," index. If this index pattern is not existing, create it via the add-on management tools:"]}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["Stack management > Index pattern ",(0,a.jsx)("br",{}),(0,a.jsx)(t.img,{alt:"Dashboards : create index, step 1 out of 3",src:s(7745).A+"",width:"1348",height:"747"}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{})]}),"\n",(0,a.jsxs)(t.li,{children:["Create a new index ",(0,a.jsx)("br",{}),(0,a.jsx)(t.img,{alt:"Dashboards : create index, step 2 out of 3",src:s(2450).A+"",width:"1323",height:"702"}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{})]}),"\n",(0,a.jsxs)(t.li,{children:["Set ",(0,a.jsx)(t.em,{children:"time filter"})," to ",(0,a.jsx)(t.strong,{children:"none"}),(0,a.jsx)("br",{}),(0,a.jsx)(t.img,{alt:"Dashboards : create index, step 3 out of 3",src:s(1183).A+"",width:"1337",height:"895"}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{})]}),"\n"]}),"\n",(0,a.jsx)(t.admonition,{type:"warning",children:(0,a.jsxs)(t.p,{children:["Make sure to set the ",(0,a.jsx)(t.em,{children:"time filter"})," to ",(0,a.jsx)(t.em,{children:'"I don\'t want to use the time filter"'})," to prevent any issue when trying to pull the data out from the database."]})}),"\n",(0,a.jsx)(t.admonition,{type:"note",children:(0,a.jsxs)(t.p,{children:["If the metadata you are looking for is not available and cannot be found in the dropdown options, refresh the ",(0,a.jsx)("code",{children:"f2_*"})," index (which can be manually triggered from the list of saved objects)."]})}),"\n",(0,a.jsx)(t.p,{children:"The dashboards add-on provided with Fast2 is the go-to tool for migration report, project advancement insights, and deeper data analysis."}),"\n",(0,a.jsx)(t.p,{children:"However data manipulations in this tool are not always intuitive nor straight forward, although they do open new dimensions regarding in-depth studies by the compound aggregation, data conversion and other operations now at the tips of your fingers."}),"\n",(0,a.jsx)(t.p,{children:"Several use-cases can be envisioned, we will only relate here the data conversion steps to go through given the widespread necessity of such a basic task."}),"\n",(0,a.jsx)(t.h3,{id:'how-to-import data-toc-label="How to import"',children:"Imports objects into the dashboards feature"}),"\n",(0,a.jsxs)(t.p,{children:["This section will guide you through the import process of resources (such as indices, visualization as ",(0,a.jsx)(t.code,{children:".ndjson"})," files and others)."]}),"\n",(0,a.jsx)(t.p,{children:'This resource can be imported into your dashboard add-on from the right-side menu > "Stack management" > "Saved objects" > "Import"'}),"\n",(0,a.jsx)(t.p,{children:"as shown on the screen-capture below :"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Dashboard : import resource",src:s(3685).A+"",width:"1368",height:"573"})}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Dashboards : ask to choose on import conflict",src:s(1642).A+"",width:"1758",height:"1222"})}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Dashboards : choose already existing Fast2 index",src:s(579).A+"",width:"1844",height:"1218"})}),"\n",(0,a.jsx)(t.h3,{id:'visualisation-exception-table data-toc-label="Exception table"',children:"Resource #1 : Exception table"}),"\n",(0,a.jsx)(t.admonition,{type:"info",children:(0,a.jsx)(t.p,{children:"This resource has been generated from OpenSearch dashboards but can be imported into either Kibana and OpenSearch dashboards."})}),"\n",(0,a.jsx)(t.p,{children:"For a list of exceptions, since the error messages and steps in error are tracked in the database but not attached to the punnet itself, it is possible to rely on the dashboards add-on to generate a table of exceptions, accross multiple campaigns. With all the punnet details required for both investigations and error resolution, but for delta migrations afterwards, this table can be exported in CSV for externalisation of this asset."}),"\n",(0,a.jsx)(t.p,{children:"Here is an example of a table gathering :"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Campaign"}),": campaign where the exception is thrown"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"PunnetId"}),": ID of the punnet"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"documentId"}),": ID of the document (useful when the punnets store several documents)"]}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.strong,{children:"Document name"})}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Step"})," where the exception occured"]}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.strong,{children:"Exception class"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.strong,{children:"Exception message"})}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Content"})," URL (if any)"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Count"})," of the number of documents in the punnet"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Dashboard for exception table",src:s(3331).A+"",width:"2240",height:"1223"})}),"\n",(0,a.jsx)(t.p,{children:"To get started with this visualisation, or to add it to your existing dashboard, click down below :"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:s(7896).A+"",children:":material-file-download: Download this resource"})}),"\n",(0,a.jsxs)(t.p,{children:["This resources can be imported as ",(0,a.jsx)(t.a,{href:"#imports-objects-into-the-dashboards-feature",children:"explained previously"})]}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(t.h3,{id:'visualisation-campaign-ration data-toc-label="Ratio per campaign"',children:"Resource #2 : Campaign success ratio"}),"\n",(0,a.jsx)(t.admonition,{type:"info",children:(0,a.jsx)(t.p,{children:"This resource has been generated from OpenSearch dashboards but can be imported into either Kibana and OpenSearch dashboards."})}),"\n",(0,a.jsx)(t.p,{children:"For a graph visualization of the success ratio per map/campaign, the following resource can be imported for a per-day granularity of the results, where exceptions are summed up (no task differenciation), for comparison with the successfully processed documents within this same campaign."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Dashboard for campaign success ratio",src:s(3983).A+"",width:"2240",height:"1223"})}),"\n",(0,a.jsx)(t.p,{children:"To get started with this visualisation, or to add it to your existing dashboard, click down below :"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:s(6290).A+"",children:":material-file-download: Download this visualization"})}),"\n",(0,a.jsxs)(t.p,{children:["This resources can be imported as ",(0,a.jsx)(t.a,{href:"#imports-objects-into-the-dashboards-feature",children:"explained previously"}),"."]}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(t.h3,{id:'visualisation-processing-speed data-toc-label="Processing speed"',children:"Resource #3 : Processing speed per task"}),"\n",(0,a.jsx)(t.admonition,{type:"info",children:(0,a.jsx)(t.p,{children:"This resource has been generated from OpenSearch dashboards but can be imported into either Kibana and OpenSearch dashboards."})}),"\n",(0,a.jsx)(t.p,{children:"For a graph visualization of the success ratio per map/campaign, the following resource can be imported for a per-day granularity of the results, where exceptions are summed up (no task differenciation), for comparison with the successfully processed documents within this same campaign."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Dashboard for Processing speed per task",src:s(5156).A+"",width:"579",height:"255"})}),"\n",(0,a.jsx)(t.p,{children:"To get started with this visualisation, or to add it to your existing dashboard, click down below :"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:s(8266).A+"",children:":material-file-download: Download this visualization"})}),"\n",(0,a.jsxs)(t.p,{children:["This resources can be imported as ",(0,a.jsx)(t.a,{href:"#imports-objects-into-the-dashboards-feature",children:"explained previously"}),"."]}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(t.h3,{id:"advanced-filtering-capabilities",children:"Advanced filtering capabilities"}),"\n",(0,a.jsx)(t.p,{children:"Since the visualisations can pull out vast amounts of data from the database, most of the results might need to be narrowed down using the filter function :"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Dashboard : import menu",src:s(1377).A+"",width:"1117",height:"300"})}),"\n",(0,a.jsx)(t.p,{children:"Head out to the matching documentation (Kibana or OpenSearch dashboards) for basic rules and help on how to build such filter."}),"\n",(0,a.jsx)(t.p,{children:"We will here just focus on one main filter, which would help to only get the relevant data for either a ratio or datatable of success or failure along the migration."}),"\n",(0,a.jsxs)(t.p,{children:["Our need is to only the the documents/punnets, whose status are ",(0,a.jsx)(t.code,{children:"ProcessedException"})," (to gather all failed documents, no matter the task where the exception got thrown) or the documents/punnets being both ",(0,a.jsx)(t.code,{children:"ProcessedOK"})," from the injection task (which will be called here: ",(0,a.jsx)("b",{children:"Last task"}),")."]}),"\n",(0,a.jsx)(t.p,{children:"In short, we only want to select :"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"the OK's of the injector, which induces the success of the migration for this document"}),"\n",(0,a.jsx)(t.li,{children:"the KO's of all the tasks"}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Code-wise, since our expression would looks like this :"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",children:'status == KO || (status == OK && step == "Last task");\n'})}),"\n",(0,a.jsx)(t.p,{children:"Since"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"||"})," is ",(0,a.jsx)(t.em,{children:"should"})]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"&&"})," is ",(0,a.jsx)(t.em,{children:"must"})]}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["the final syntax is (for DSL -- ",(0,a.jsx)("i",{children:"Dashboards Query Language"})," -- or KQL -- ",(0,a.jsx)("i",{children:"Kibana query language"}),") :"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-json",children:'{\n  "query": {\n    "bool": {\n      "should": [\n        {\n          "term": { "status.keyword": "ProcessedException" }\n        },\n        {\n          "bool": {\n            "must": [\n              { "term": { "status.keyword": "ProcessedOK" } },\n              { "term": { "stepName.keyword": "Last task" } }\n            ]\n          }\n        }\n      ]\n    }\n  }\n}\n'})}),"\n",(0,a.jsx)(t.p,{children:"This code is to be used in the filter function, as advanced filter (instead of the default fields-prepared option)."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Dashboard : import menu",src:s(7425).A+"",width:"698",height:"925"})}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(t.p,{children:"The dashboards add-on provided with Fast2 is the go-to tool for migration report, project advancement insights, and deeper data analysis."}),"\n",(0,a.jsx)(t.p,{children:"However data manipulations in this tool are not always intuitive nor straight forward, although they do open new dimensions regarding in-depth studies by the compound aggregation, data conversion and other operations now at the tips of your fingers."}),"\n",(0,a.jsx)(t.p,{children:"Several use-cases can be envisioned, we will only relate here the data conversion steps to go through given the widespread necessity of such a basic task."}),"\n",(0,a.jsx)(t.h3,{id:"datatype-conversions",children:"Datatype conversions"}),"\n",(0,a.jsx)(t.p,{children:"Let\u2019s consider a metadata processed by Fast2 as a String instead of a float. One frequent use-case could be reporting the sum of all content size processed during a campaign. Adding up String values never ended up well so far, Kibana will have to parse these values beforehand, to have the user access the newly created value with the correct type."}),"\n",(0,a.jsx)(t.p,{children:"We will base our example on the following punnet structure:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-xml",metastring:'title="punnet.xml" {14-16}"',children:'<?xml version=\'1.0\' encoding=\'UTF-8\'?>\n<ns:punnet xmlns:ns="http://www.arondor.com/xml/document" punnetId="FileNetSource#page_0#pageIndex_0">\n\t<ns:documentset>\n\t\t<ns:document documentId="{1B62F7C4-8E75-4D99-B84C-0AAD14B13A4E}">\n\t\t\t<ns:contentset>\n\t\t\t\t<ns:content mimeType="application/pdf">\n\t\t\t\t\t<ns:url>path/to/file/content</ns:url>\n\t\t\t\t</ns:content>\n\t\t\t</ns:contentset>\n\t\t\t<ns:dataset>\n\t\t\t\t<ns:data name="MimeType" type="String">\n\t\t\t\t\t<ns:value>application/pdf</ns:value>\n\t\t\t\t</ns:data>\n\t\t\t\t<ns:data name="ContentSize" type="String">\n\t\t\t\t\t<ns:value>43315.0</ns:value>\n\t\t\t\t</ns:data>\n\t\t\t\t<ns:data name="name" type="String">\n\t\t\t\t\t<ns:value>file_name</ns:value>\n\t\t\t\t</ns:data>\n\t\t\t\t...\n\t\t\t</ns:dataset>\n\t\t\t<ns:folderset />\n\t\t\t<ns:annotationset />\n\t\t</ns:document>\n\t</ns:documentset>\n\t<folderSet />\n</ns:punnet>\n'})}),"\n",(0,a.jsxs)(t.p,{children:["Here, the data type of the ",(0,a.jsx)(t.em,{children:"ContentSize"})," property is ",(0,a.jsx)(t.code,{children:"String"}),", as the type attribute states. Our job will be to parse this ",(0,a.jsx)(t.code,{children:"String"})," value to ",(0,a.jsx)(t.code,{children:"Float"}),", since we have a decimal."]}),"\n",(0,a.jsx)(t.p,{children:"This operation happens in 2 steps:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsx)(t.li,{children:"Making the original field (with the wrong type) accessible from a script,"}),"\n",(0,a.jsx)(t.li,{children:"Writing the correct parsing script."}),"\n"]}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(t.h4,{id:"step-1-making-the-field-accessible",children:"Step 1: Making the field accessible"}),"\n",(0,a.jsx)(t.p,{children:"Open the dashboards retrieving data from the database where Fast2 is sending the data."}),"\n",(0,a.jsx)(t.p,{children:"Access the Dev Tools of the dashboards to execute the query, which has to be built a specific way in order to change the mapping of the field to convert."}),"\n",(0,a.jsxs)(t.p,{children:["The index prefix of Fast2 data is ",(0,a.jsx)(t.code,{children:"f2_"}),", which is why the request has to specify the index to apply the ",(0,a.jsx)(t.code,{children:"PUT"})," operation on."]}),"\n",(0,a.jsx)(t.p,{children:"Next you have to write in the request body the whole way to the property to convert, first by accessing the punnet, then the properties of the punnet where the documents are stored, then the properties of the documents object where the metadata are stored, and so on."}),"\n",(0,a.jsxs)(t.p,{children:["Finally specify the current type (",(0,a.jsx)(t.code,{children:"text"})," in our case), with ",(0,a.jsx)(t.code,{children:"fielddata:true"}),"."]}),"\n",(0,a.jsx)(t.p,{children:"The final query will look like such:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-sh",children:'PUT f2_*/_mapping\n{\n  "properties": {\n    "punnet": {\n      "properties": {\n        "documents": {\n          "properties": {\n            "data": {\n              "properties": {\n                "ContentSize": {\n                  "type": "text",\n                  "fielddata": true\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n'})}),"\n",(0,a.jsxs)(t.p,{children:["The query is successfully executed once the ",(0,a.jsx)(t.code,{children:"acknowledged:true"})," message is returned."]}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(t.h4,{id:"step-2-the-parsing-script",children:"Step 2: The parsing script"}),"\n",(0,a.jsxs)(t.p,{children:["Head now to the Dashboads Management section, choose \u2018Index patterns\u2019, and select the one related to Fast2 (",(0,a.jsx)(t.code,{children:"f2_*"}),")."]}),"\n",(0,a.jsx)(t.p,{children:"!!! hint"}),"\n",(0,a.jsxs)(t.p,{children:["You may require to refresh the ",(0,a.jsx)(t.code,{children:"f2_*"})," index, to make sure all the latest properties are fetched from the database."]}),"\n",(0,a.jsxs)(t.p,{children:['Click on the "',(0,a.jsx)(t.em,{children:"Scripted field"}),'" tab to create a new one using the data property you just made accessible.']}),"\n",(0,a.jsxs)(t.p,{children:["Enter a relevant name (ex/ ContentSize-float), select the new type of this field (",(0,a.jsx)(t.code,{children:"number"}),", for our example), and write the following script:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",children:'if (doc.containsKey("punnet.documents.data.ContentSize"))\n  return Float.parseFloat(doc["punnet.documents.data.ContentSize"].value);\nelse return -1;\n'})}),"\n",(0,a.jsx)(t.p,{children:"Save this new field, and create a new visualization displaying a sum of this data per campaign (as this was our initial challenge)."}),"\n",(0,a.jsx)(t.p,{children:"In the sum section, our field is now reachable for any chart requiring numerical data."}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:"String"})," data is now accessible as a numerical chart field !! :partying_face:"]}),"\n",(0,a.jsx)(t.p,{children:"And that\u2019s it !"}),"\n",(0,a.jsx)(t.p,{children:"More use cases can be addressed by scripts with higher level of complexity, to create new data, digest or sort data, you name it."}),"\n",(0,a.jsx)(t.p,{children:"This new dimension of data analysis via Kibana opens up way more possibilities, while increasing the precision of data aggregation to bring the best answers to the project management team."}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(t.h2,{id:"octicons-bug-24-troubleshooting",children:":octicons-bug-24: Troubleshooting"}),"\n",(0,a.jsx)(t.h3,{id:'cannot-reach-db data-toc-label="Unable to access database"',children:":material-connection: Dashboards do not reach the database"}),"\n",(0,a.jsxs)(t.p,{children:["Make sure the database port has been correctly configured in the YAML file of the dashboards. Head to the ",(0,a.jsx)(t.a,{href:"/uxodocs/docs/fast2/components/database#port",children:"port section"})," for more details."]}),"\n",(0,a.jsx)(t.h3,{id:'port-not-showing data-toc-label="Unable to access dashboards"',children:":material-lan-connect: Could not ping dashboard on port 1791"}),"\n",(0,a.jsxs)(t.p,{children:["Make sure declaring your port in the 2 expected places. Head to the ",(0,a.jsx)(t.a,{href:"#ports",children:"port section"})," for more details."]}),"\n",(0,a.jsx)(t.h3,{id:'connection-refused data-toc-label="Connection refused"',children:":material-web-remove: Connection refused when accessing the dashboards port"}),"\n",(0,a.jsx)(t.p,{children:"In case you cannot reach the dashboards UI remotely, you might want to check several things :"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["make sure the dashboards are started, from the Fast2 server (Node process running on the port declared in the ",(0,a.jsx)(t.code,{children:"./opensearch-dashboards-X.Y.Z/config/opensearch_dashboards.yml"}),")"]}),"\n",(0,a.jsx)(t.li,{children:"make sure you have accessing the same port from your remote machine"}),"\n",(0,a.jsx)(t.li,{children:"check with your IT team to make sure the network securities are allowing outbound rules for this port (as they might have done for the Fast2UI port)"}),"\n",(0,a.jsxs)(t.li,{children:["make sure you updated the dashboards ",(0,a.jsx)(t.code,{children:"server.host"})," configuration (check ",(0,a.jsx)(t.a,{href:"#remote-access-to-the-dashboards",children:"this section"})," for more details)"]}),"\n"]}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(t.h2,{id:"faq",children:"FAQ"}),"\n",(0,a.jsx)(t.h3,{id:"octicons-question-24-run-fast2-without-dashboards",children:":octicons-question-24: Run Fast2 without dashboards"}),"\n",(0,a.jsx)(t.p,{children:"It is possible to run Fast2 without the dashboards, as this add-on is just reading data stored in the internal database, to serve them as graphical vizualisation."}),"\n",(0,a.jsxs)(t.p,{children:["By no mean this add-on is ",(0,a.jsx)(t.strong,{children:"necessary"})," for the migration."]}),"\n",(0,a.jsx)(t.h3,{id:"octicons-question-24-access-dashboard-when-not-migrating",children:":octicons-question-24: Access dashboard when not migrating"}),"\n",(0,a.jsx)(t.p,{children:"Visualizations can be reached via 2 different ways, depending on your needs:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Either from the UI of Fast2,"}),"\n",(0,a.jsx)(t.li,{children:"Or directly from the browser via the declared port (1791 or other)."}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"The latter option gives access to the tool even when Fast2 is not running."}),"\n",(0,a.jsx)(t.p,{children:"Since the dashboards fetch data directly from the database, it is not possible to populate the visualizations with migration data if the database is not running as well."}),"\n",(0,a.jsx)(t.h3,{id:'cannot-reach-db data-toc-label="Unable to access database"',children:":octicons-question-24: Dashboards do not reach the database"}),"\n",(0,a.jsxs)(t.p,{children:["Make sure the database port has been correctly configured in the YAML file of the dashboards. Head to the ",(0,a.jsx)(t.a,{href:"/uxodocs/docs/fast2/components/database#port",children:"port section"})," for more details."]}),"\n",(0,a.jsx)(t.h3,{id:'port-not-showing data-toc-label="Unable to access dashboards"',children:":octicons-question-24: Could not ping dashboard on port 1791"}),"\n",(0,a.jsxs)(t.p,{children:["Make sure declaring your port in the 2 expected places. Head to the ",(0,a.jsx)(t.a,{href:"#ports",children:"port section"})," for more details."]})]})}function l(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},2450:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/dashboards_create-index_2-3-76731458caababafcb1ed0aa3abea814.png"},3331:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/dashboards_visualization-exception-table-592e5d17a96b4efb782bc9f37c2b781f.png"},3685:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/dashboards_import-menu-4b04ff32c5f7469bb6c0c28f4fc8bb52.png"},3983:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/dashboards_visualization-campaign-ratio-a0f620eada615cbfab7b2c4b93aca15f.png"},5156:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/dashboards_graph_processing_speed-551af5a3cf91e509da354403144d64a1.png"},6290:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/files/dashboards_Campaign-success-ratio-per-day-cb4fd063f09267fc3b258e600ac35346.ndjson"},7425:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/dashboards_query-json-e35361d8eb26884d707aa750380aafa0.png"},7745:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/dashboards_create-index_1-3-84396c1aff86eaf3c46afcac88032036.png"},7896:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/files/dashboards_exception-data-table-5dc422af754547c4955336992ad56204.ndjson"},8266:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/files/dashboards_processing_speed_per_task-92de2c9a143b7d70efe234d0910ab338.ndjson"},8453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>r});var n=s(6540);const a={},i=n.createContext(a);function o(e){const t=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);