"use strict";(globalThis.webpackChunkuxodocs=globalThis.webpackChunkuxodocs||[]).push([[6184],{4810:(e,n,s)=>{s.d(n,{A:()=>a});const a=s.p+"assets/images/drools-example-condition-d0d2191572fed9a1b3393e58f138640b.png"},5932:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"advanced/drools","title":"Drools: the Java rules engine","description":"Based on Excel document, \u201cdrools\u201d is a rule engine used to execute code scripts, Java code in our context. Users can define business and/or functional rules as data transformations, mapping, etc. One of the key benefits is its adaptation to any structure and any level of complexity as long as your code respects the punnet structure (quick reminder here if need be \ud83d\ude09). It can easily be shared between your team members for complex project to have concerned people seamlessly involved. Another upside: no development skill is required to build your own rules. Fast2 supports such feature with the ApplyDroolsTask.","source":"@site/docs/fast2/advanced/drools.md","sourceDirName":"advanced","slug":"/advanced/drools","permalink":"/uxodocs/docs/fast2/advanced/drools","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"Drools","permalink":"/uxodocs/docs/fast2/tags/drools"},{"inline":true,"label":"Java","permalink":"/uxodocs/docs/fast2/tags/java"},{"inline":true,"label":"Excel","permalink":"/uxodocs/docs/fast2/tags/excel"}],"version":"current","frontMatter":{"tags":["Drools","Java","Excel"]},"sidebar":"docs","previous":{"title":"custom-module","permalink":"/uxodocs/docs/fast2/advanced/custom-module"},"next":{"title":"javascript","permalink":"/uxodocs/docs/fast2/advanced/javascript"}}');var t=s(4848),o=s(8453);const i={tags:["Drools","Java","Excel"]},l="Drools: the Java rules engine",r={},d=[{value:":octicons-light-bulb-16: Spreadsheet structure",id:"octicons-light-bulb-16-spreadsheet-structure",level:2},{value:":octicons-light-bulb-16: How to read",id:"octicons-light-bulb-16-how-to-read",level:2},{value:"Read a condition",id:"read-a-condition",level:3},{value:"Read an action",id:"read-an-action",level:3},{value:"Parameters",id:"parameters",level:2},{value:":octicons-pencil-16: Write a condition",id:"octicons-pencil-16-write-a-condition",level:2},{value:"Action examples",id:"action-examples",level:2},{value:"Add new data",id:"add-new-data",level:3},{value:"Add new value to existing data",id:"add-new-value-to-existing-data",level:3},{value:"Stop a rule",id:"stop-a-rule",level:3},{value:":material-check-all: Good practices",id:"material-check-all-good-practices",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"drools-the-java-rules-engine",children:"Drools: the Java rules engine"})}),"\n",(0,t.jsxs)(n.p,{children:["Based on Excel document, \u201cdrools\u201d is a rule engine used to execute code scripts, Java code in our context. Users can define business and/or functional rules as data transformations, mapping, etc. One of the key benefits is its adaptation to any structure and any level of complexity as long as your code respects the punnet structure (",(0,t.jsx)(n.a,{href:"/uxodocs/docs/fast2/getting-started/overall-concepts#punnet",children:"quick reminder here"})," if need be \ud83d\ude09). It can easily be shared between your team members for complex project to have concerned people seamlessly involved. Another upside: no development skill is required to build your own rules. Fast2 supports such feature with the ApplyDroolsTask."]}),"\n",(0,t.jsx)(n.p,{children:"A sample of Drools spreadsheet can be downloaded to help you getting started."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:s(9152).A+"",children:":material-file-download: Download drools template"})}),"\n",(0,t.jsx)(n.h2,{id:"octicons-light-bulb-16-spreadsheet-structure",children:":octicons-light-bulb-16: Spreadsheet structure"}),"\n",(0,t.jsx)(n.p,{children:"The following picture represents a drool sheet as you could find one in an Excel document:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Drools preview",src:s(7950).A+"",width:"1683",height:"636"})}),"\n",(0,t.jsx)(n.p,{children:"It\u2019s composed with :"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"RuleSet"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:": means that the current speadsheet is a decision table"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Import"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:": all java classes required, separated by a comma. These are the same packages that would be imported in a regular Java class in order to have the code running properly."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Sequential"})," (optional)"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:": specify here the order in which rules should apply"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"RuleTable"})," rules"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:": name of the table"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"NAME"})," column"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:": represents the name of the differents rules"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"CONDITION"})," column"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:": condition to verify to perform an action"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ACTION"})," column"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:": action to perform if all previous conditions have been validated"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Variables used are indicated below the column CONDITION (doc : Document)"}),"\n"]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.h2,{id:"octicons-light-bulb-16-how-to-read",children:":octicons-light-bulb-16: How to read"}),"\n",(0,t.jsx)(n.p,{children:"Quite simple! A rule is a row read from left to right, as regular code."}),"\n",(0,t.jsx)(n.p,{children:"An empty row is interpreted by the rules engine as the end of the process. Each rule will have to meet particular criteria. There must be at least one condition and one action per rule."}),"\n",(0,t.jsx)(n.h3,{id:"read-a-condition",children:"Read a condition"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"A rule can have multiple conditions"}),"\n",(0,t.jsx)(n.li,{children:"All conditions must be validated to apply the action of the same row"}),"\n",(0,t.jsxs)(n.li,{children:["If no value is present in the condition column, the condition is skipped (considered ",(0,t.jsx)(n.code,{children:"true"}),")"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Condition example in a Drools stylesheet",src:s(4810).A+"",width:"1493",height:"394"})}),"\n",(0,t.jsx)(n.p,{children:"A condition cell will only hold one statement. If several conditions have to be met, they will be in the next columns."}),"\n",(0,t.jsx)(n.h3,{id:"read-an-action",children:"Read an action"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"A rule can have multiple actions"}),"\n",(0,t.jsx)(n.li,{children:"Actions are performed from left to right"}),"\n",(0,t.jsx)(n.li,{children:"Inside a cell, the actions are separated by a semicolon ;"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Condition example in a Drools stylesheet",src:s(7311).A+"",width:"1493",height:"354"})}),"\n",(0,t.jsx)(n.p,{children:"The actions are read just like any code snippet, similarly to a regular script file."}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsx)(n.p,{children:"There are two different ways to use parameters:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["You only need one parameter for your condition or action : ",(0,t.jsx)(n.code,{children:"$param"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Otherwise, separate values by comma, and use ",(0,t.jsx)(n.code,{children:"$1"}),", ",(0,t.jsx)(n.code,{children:"$2"})," and so on in you condition/action."]}),"\n"]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.h2,{id:"octicons-pencil-16-write-a-condition",children:":octicons-pencil-16: Write a condition"}),"\n",(0,t.jsxs)(n.p,{children:["Conditions, just as in a regular coding snippet, must be performed as a boolean. Actions are executed only if condition is ",(0,t.jsx)(n.em,{children:"TRUE"}),". It\u2019s highly recommended to use ",(0,t.jsx)(n.code,{children:"eval(<condition>)"})," or ",(0,t.jsx)(n.code,{children:"!eval(<condition>)"})," for conditions."]}),"\n",(0,t.jsx)(n.p,{children:"!!! Check"}),"\n",(0,t.jsx)(n.p,{children:"Just as you would write any condition in your code,"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Conditions must not end by a semi-colon (",(0,t.jsx)(n.code,{children:";"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Characters allowed : ",(0,t.jsx)(n.code,{children:"<"}),", ",(0,t.jsx)(n.code,{children:">"}),", ",(0,t.jsx)(n.code,{children:"<="}),", ",(0,t.jsx)(n.code,{children:">="}),", ",(0,t.jsx)(n.code,{children:"||"}),", ",(0,t.jsx)(n.code,{children:"&&"}),", \u2026"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["If you want to perform an action no matter what, do ",(0,t.jsx)(n.code,{children:"eval($param)"})," with ",(0,t.jsx)(n.code,{children:"$param = true"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"If you need the document to have a specific data before making any action, do:"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"doc.getDataSet().hasData($param)"})," with ",(0,t.jsx)(n.code,{children:"$param = yourDataName"}),"."]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.h2,{id:"action-examples",children:"Action examples"}),"\n",(0,t.jsx)(n.p,{children:"!!! Check"}),"\n",(0,t.jsxs)(n.p,{children:["You can put any Java code to perform an action, as long as you end each instruction by a semi-colon (",(0,t.jsx)(n.code,{children:";"}),")."]}),"\n",(0,t.jsx)(n.h3,{id:"add-new-data",children:"Add new data"}),"\n",(0,t.jsx)(n.p,{children:"To add a new data, if you know both the key/name and the value, use the following code :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'doc.getDataSet().addData("<key>", "<type>","<value>");\n'})}),"\n",(0,t.jsx)(n.p,{children:"In case the value is unknown at the moment or you object is too complex and you might need to add properties to the data object:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'Data data = doc.getDataSet().addData("<key>", "<type>");\n\ndata.setProperty("<key>","<value>");\n'})}),"\n",(0,t.jsx)(n.p,{children:"When performing such operation, though, don\u2019t forget to add the proper Fast2 package to manipulate Data type."}),"\n",(0,t.jsx)(n.h3,{id:"add-new-value-to-existing-data",children:"Add new value to existing data"}),"\n",(0,t.jsx)(n.p,{children:"Add one value:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'doc.getDataSet().getData("<data-key>").addValue("$param");\n'})}),"\n",(0,t.jsx)(n.p,{children:"Add multiple values to the same data:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'doc.getDataSet().getData("<data-key>").getValues().addAll(<list-of-values>);\n'})}),"\n",(0,t.jsx)(n.h3,{id:"stop-a-rule",children:"Stop a rule"}),"\n",(0,t.jsxs)(n.p,{children:["You can stop the rule execution at a specific time when an action has been performed. Use ",(0,t.jsx)(n.code,{children:"drools.halt();"})," in the action section."]}),"\n",(0,t.jsx)(n.p,{children:"The next action(s) will not be performed as the rule execution is stopped (useful in case of error management)."}),"\n",(0,t.jsx)(n.h2,{id:"material-check-all-good-practices",children:":material-check-all: Good practices"}),"\n",(0,t.jsx)(n.p,{children:"We advise you to create a folder at the root of Fast2 and name it Rules. However, Fast2 will be able to fetch your drools files anywhere as long as the specified path is accessible to the Fast2 server."}),"\n",(0,t.jsx)(n.p,{children:"This path will be fill in the the task ApplyDroolsTask."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"ApplyDroolsTask configuration in Fast2 catalog",src:s(8113).A+"",width:"366",height:"533"})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},7311:(e,n,s)=>{s.d(n,{A:()=>a});const a=s.p+"assets/images/drools-example-action-2c8498a202f56d068f9231e84958db6c.png"},7950:(e,n,s)=>{s.d(n,{A:()=>a});const a=s.p+"assets/images/drools-example-7c9af286bd21854223f62cc5eb029210.png"},8113:(e,n,s)=>{s.d(n,{A:()=>a});const a=s.p+"assets/images/droolsTask2025-c569db9c9d114816c3449bd5563c1217.png"},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>l});var a=s(6540);const t={},o=a.createContext(t);function i(e){const n=a.useContext(o);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),a.createElement(o.Provider,{value:n},e.children)}},9152:(e,n,s)=>{s.d(n,{A:()=>a});const a=s.p+"assets/files/Drools-template-d1f0ae17cce6e5f1fb18df499f7bab4d.xlsx"}}]);