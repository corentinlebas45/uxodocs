"use strict";(globalThis.webpackChunkuxodocs=globalThis.webpackChunkuxodocs||[]).push([[8957],{8453:(e,s,r)=>{r.d(s,{R:()=>a,x:()=>o});var t=r(6540);const n={},i=t.createContext(n);function a(e){const s=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),t.createElement(i.Provider,{value:s},e.children)}},9680:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"getting-started/installation","title":"Installation","description":"Requirements","source":"@site/docs/fast2/getting-started/installation.md","sourceDirName":"getting-started","slug":"/getting-started/installation","permalink":"/uxodocs/docs/fast2/getting-started/installation","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"weight":10,"draft":false,"title":"Installation"},"sidebar":"docs","previous":{"title":"Create a map","permalink":"/uxodocs/docs/fast2/getting-started/create-workflow"},"next":{"title":"What you need to know before committing to Fast2","permalink":"/uxodocs/docs/fast2/getting-started/overall-concepts"}}');var n=r(4848),i=r(8453);const a={weight:10,draft:!1,title:"Installation"},o=void 0,l={},c=[{value:"Requirements",id:"requirements",level:2},{value:"Fast2 packages",id:"fast2-packages",level:2},{value:"Root folder anatomy",id:"root-folder-anatomy",level:2},{value:"Start-up sequence",id:"start-up-sequence",level:2},{value:"Start Fast2 Broker",id:"start-fast2-broker",level:2},{value:"From command line",id:"from-command-line",level:3},{value:"As service",id:"as-service",level:3},{value:":material-numeric-1-circle: Create a user for Fast2",id:"material-numeric-1-circle-create-a-user-for-fast2",level:5},{value:":material-numeric-2-circle: Execution path",id:"material-numeric-2-circle-execution-path",level:5},{value:":material-numeric-3-circle: Symbolic link",id:"material-numeric-3-circle-symbolic-link",level:5},{value:":material-numeric-4-circle: Script uses",id:"material-numeric-4-circle-script-uses",level:5},{value:"Start Fast2 Worker",id:"start-fast2-worker",level:2}];function d(e){const s={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h5:"h5",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h2,{id:"requirements",children:"Requirements"}),"\n",(0,n.jsx)(s.p,{children:"The installation of Fast2 requires a few environment specifications to run properly :"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"What"}),(0,n.jsx)(s.th,{}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"RAM"}),(0,n.jsx)(s.td,{children:"8GB+"}),(0,n.jsxs)(s.td,{children:["We highly recommend having at least 8GB. ",(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),"When switching to production environments, 16GB or 32GB will be required since more documents will be handled at once, and heavy tasks (",(0,n.jsx)(s.em,{children:"e.g."})," conversion, extraction) might get short on resources."]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Processor"}),(0,n.jsx)(s.td,{children:"8 CPUs"}),(0,n.jsx)(s.td,{children:"Processor capabilities need to be aligned with migration requirements, such as data mapping, content conversion and heavy I/O."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Storage"}),(0,n.jsx)(s.td,{children:"128GB+"}),(0,n.jsx)(s.td,{children:"Although the contents dealt by Fast2 will be temporarily stored (and deleted afterwards if asked), the server needs enough storage for the files/contents alongside the database tracking all the migration information."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Java"}),(0,n.jsx)(s.td,{children:"JDK-11"}),(0,n.jsxs)(s.td,{children:["Any provider will fit (Oracle, ",(0,n.jsx)(s.a,{href:"https://developers.redhat.com/products/openjdk/download",children:"OpenJDK"}),", etc). If you have multiple JDK/JRE already installed, specify the correct one in the ",(0,n.jsx)(s.code,{children:"./config/env.properties"})," file."]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"OS"}),(0,n.jsx)(s.td,{children:"Windows\xa07+, Linux"}),(0,n.jsxs)(s.td,{children:["All versions of Windows 7+ are supported. ",(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),"All common distros of Linux are supported (Ubuntu, RedHat, CentOS, etc)",(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),"Power architecture are supported as well (except the ones running in AIX), but only Java parts will work seamlessly whereas third-party software (",(0,n.jsx)(s.em,{children:"e.g."})," imagemagick, libreoffice, etc) might not, as they have not all have been developed for such platforms. ",(0,n.jsx)("br",{}),(0,n.jsx)("br",{})," Although the broker will not run correctly on an Windows 2003, a worker can still run on it, remotely, and communicate with a broker installed on a more recent version."]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Bandwidth"}),(0,n.jsx)(s.td,{children:"1GB"}),(0,n.jsx)(s.td,{children:"The more calls, payloads, and contents Fast2 will have to deal with, the bigger the network bandwidth must be to reduce latency. If 250-500MB might do for lower environments, we recommend 1GB for Production environments."})]})]})]}),"\n",(0,n.jsxs)(s.p,{children:["While setting up the production server for Fast2, make sure to scale the Fast2 machine accordingly. You may need to increase the allocated memory for both the broker and the background database. If you planned to deal with campaigns of a few millions of documents, setting ",(0,n.jsx)(s.strong,{children:"8GB"})," of memory for the ",(0,n.jsx)(s.a,{href:"/uxodocs/docs/fast2/components/broker#configure-the-broker",children:"broker"})," and ",(0,n.jsx)(s.strong,{children:"8GB"})," for the ",(0,n.jsx)(s.a,{href:"/uxodocs/docs/fast2/components/database#configuration",children:"database"})," as well is a good starting point."]}),"\n",(0,n.jsx)(s.admonition,{type:"warning",children:(0,n.jsxs)(s.p,{children:["If you decide to go for a custom Elasticsearch database, make sure to confirm the compatibility with your environment at ",(0,n.jsx)(s.a,{href:"https://www.elastic.co/fr/support/matrix",children:"Elasticsearch Support Matrix"}),"."]})}),"\n",(0,n.jsx)(s.h2,{id:"fast2-packages",children:"Fast2 packages"}),"\n",(0,n.jsx)(s.p,{children:"The Fast2 distribution you need depends on your target environment. It exists three way to deploy a Fast2 :"}),"\n",(0,n.jsxs)(s.p,{children:["\xa0\xa0\xa0\xa0:material-folder-zip-outline: On premise: regular package, as an all-in-one zip file",(0,n.jsx)("br",{}),"\n\xa0\xa0\xa0\xa0:fontawesome-brands-aws: AWS: Standard AMIs",(0,n.jsx)("br",{}),"\n\xa0\xa0\xa0\xa0:material-docker: K8S: Docker Images"]}),"\n",(0,n.jsx)(s.p,{children:"Each distribution ships the following"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"A broker with one embedded worker and a user interface"}),"\n",(0,n.jsx)(s.li,{children:"An additional worker with all tasks catalog"}),"\n",(0,n.jsx)(s.li,{children:"A template to create workers with custom tasks"}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"root-folder-anatomy",children:"Root folder anatomy"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Item"}),(0,n.jsx)(s.th,{children:"Purpose"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:":material-folder: config"}),(0,n.jsx)(s.td,{children:"Configuration files, broker endpoint, Java home"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:":material-folder: logs"}),(0,n.jsx)(s.td,{children:"Logging files for both broker and worker(s)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:":material-folder: maps"}),(0,n.jsx)(s.td,{children:"XML files of all maps accessible from the UI"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:":material-folder: opensearch-X.Y.Z or elasticsearch-X.Y.Z"}),(0,n.jsx)(s.td,{children:"Either Elasticsearch or OpenSearch"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:":material-folder: service"}),(0,n.jsx)(s.td,{children:"All files required to start Fast2 as a service"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:":material-folder: worker-libs/*"}),(0,n.jsx)(s.td,{children:"All libraries and dependencies for tasks executions"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:":fontawesome-brands-java: fast2-broker-package-X.Y.Z.jar"}),(0,n.jsx)(s.td,{children:"Broker unit"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:":fontawesome-brands-java: fast2-worker-package-X.Y.Z.jar"}),(0,n.jsx)(s.td,{children:"Worker main unit"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:":material-microsoft-windows: startup-broker.bat"}),(0,n.jsx)(s.td,{children:"Binary file for Windows"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:":fontawesome-brands-linux: startup-broker.sh"}),(0,n.jsx)(s.td,{children:"Binary file for Linux"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:":material-microsoft-windows: startup-worker.bat"}),(0,n.jsx)(s.td,{children:"Binary file for Windows"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:":fontawesome-brands-linux: startup-worker.sh"}),(0,n.jsx)(s.td,{children:"Binary file for Linux"})]})]})]}),"\n",(0,n.jsx)(s.h2,{id:"start-up-sequence",children:"Start-up sequence"}),"\n",(0,n.jsx)(s.p,{children:"When Fast2 is started, either as a standalone application or a service, its different modules share a precisely defined roll-out schedule:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"First, the broker and its internal databse are started. The connection between these 2 components has to be effective, otherwise Fast2 will automatically shut down after a couple of attempts to reach the database;"}),"\n",(0,n.jsx)(s.li,{children:"The worker is then triggered, and has to register itself to the broker."}),"\n",(0,n.jsx)(s.li,{children:"Finally, the dashboard will be started if asked so, and if the binaries have been detected. First, Fast2 will try to connect to any dashboard instance running on the configured port."}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["There is no direct connection between the broker and the dashboard. The only exchange area is the Elasticsearch database, as explained in the ",(0,n.jsx)(s.a,{href:"/uxodocs/docs/fast2/getting-started/overall-concepts#architecture",children:"architecture section"}),"."]}),"\n",(0,n.jsx)(s.h2,{id:"start-fast2-broker",children:"Start Fast2 Broker"}),"\n",(0,n.jsx)(s.p,{children:"Once the regular Fast2 package is unzipped, Fast2 can be launched right away."}),"\n",(0,n.jsxs)(s.p,{children:["Whether Fast2 is launched from the batch file or as a service on your environment, the UI will be available at ",(0,n.jsx)(s.a,{href:"http://localhost:1789/",children:"http://localhost:1789/"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"By default, Fast2 Broker starts an embedded Elastic Search and an embedded Fast2 Worker."}),"\n",(0,n.jsx)(s.p,{children:"All commands below are to be run under the Fast2 install path (where the Zip has been unzipped)."}),"\n",(0,n.jsx)(s.h3,{id:"from-command-line",children:"From command line"}),"\n",(0,n.jsx)(s.p,{children:'=== ":fontawesome-brands-windows: Windows"'}),"\n",(0,n.jsx)(s.p,{children:"Go into the Fast2 install folder, and run :"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-cmd",children:"C:\\path-to-fast2\\> startup-broker.bat\n"})}),"\n",(0,n.jsx)(s.p,{children:"Administrator rights might be required since Fast2 will handle some port communications."}),"\n",(0,n.jsx)(s.p,{children:'=== ":fontawesome-brands-linux: Linux"'}),"\n",(0,n.jsx)(s.p,{children:"The following Linux installation steps work for most of Unix-based sytems.\nElasticsearch cannot be started from root user, you will need to create a secondary user to start the database binary alongside your Fast2 process."}),"\n",(0,n.jsx)(s.p,{children:"Once connected as the latter user, start Elasticsearch via its binaries."}),"\n",(0,n.jsxs)(s.p,{children:["Then, since you started Elasticsearch manually, disable the command triggering Fast2 to start the embedded Elasticsearch, from the ",(0,n.jsx)(s.code,{children:"config/application.properties"})," file :"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-log",children:"broker.elasticsearch.embedded.enabled=false\n"})}),"\n",(0,n.jsx)(s.p,{children:"You can now properly execute the following script:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:"$ ./startup-broker.sh\n"})}),"\n",(0,n.jsxs)(s.p,{children:["To end the Fast2 process, just hit ",(0,n.jsx)(s.code,{children:"Ctrl+C"})," in the command line the startup file opened."]}),"\n",(0,n.jsx)(s.h3,{id:"as-service",children:"As service"}),"\n",(0,n.jsx)(s.p,{children:'=== ":fontawesome-brands-windows: Windows"'}),"\n",(0,n.jsx)(s.p,{children:"Go into the Fast2 installation folder, and open the Windows Command Prompt."}),"\n",(0,n.jsx)(s.p,{children:"To install the service :"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-cmd",children:"C:\\path-to-fast2\\service\\windows> Fast2_broker_service.exe install\n"})}),"\n",(0,n.jsx)(s.p,{children:"Your machine may prompt a message asking to download .NET components. Please click [OK] and proceed."}),"\n",(0,n.jsxs)(s.p,{children:["Once this command is complete, you should see in your services registory a newly installed Fast2 service. You can start/stop/restart it as any other service, or via the Command Prompt (just replace ",(0,n.jsx)(s.code,{children:"install"})," in the previous command by ",(0,n.jsx)(s.em,{children:"start"}),"/",(0,n.jsx)(s.em,{children:"stop"}),"/",(0,n.jsx)(s.em,{children:"uninstall"}),"/",(0,n.jsx)(s.em,{children:"restart"}),"/",(0,n.jsx)(s.em,{children:"status"}),")."]}),"\n",(0,n.jsxs)(s.p,{children:["The logs of the service will be available from the ",(0,n.jsx)(s.code,{children:"path-to-fast2\\service\\log"})," folder."]}),"\n",(0,n.jsx)(s.p,{children:'=== ":fontawesome-brands-linux: Linux"'}),"\n",(0,n.jsx)(s.p,{children:"There are several ways to create a service under linux distribution. We will do it through systemd.\nIts major benefit is that it has been the default init system for the majority of linux distributions (Ubuntu, Red Hat, Fedora...)."}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.h5,{id:"material-numeric-1-circle-create-a-user-for-fast2",children:":material-numeric-1-circle: Create a user for Fast2"}),"\n",(0,n.jsx)(s.p,{children:"Since the embedded database cannot be started in sudo mode, you must use an existing user that meets your requirements or create a new one on the Linux machine. This will allow the broker to successfully initiate the database startup"}),"\n",(0,n.jsxs)(s.p,{children:["Let's condider here our user to be ",(0,n.jsx)(s.em,{children:"fast2user"}),"."]}),"\n",(0,n.jsxs)(s.p,{children:["Open the ",(0,n.jsx)(s.code,{children:"./startup-broker.sh"})," file and update the last line to switch users (with ",(0,n.jsx)(s.code,{children:"su fast2user -c"}),") for the Java command:"]}),"\n",(0,n.jsxs)("table",{children:[(0,n.jsxs)("tr",{style:{color:"red"},children:[(0,n.jsx)("td",{style:{fontWeight:"bold"},children:"Original line"}),(0,n.jsx)("td",{children:(0,n.jsx)(s.code,{children:'"$JAVA" -Xmx$BROKER_MAX_MEMORY ... -jar fast2-broker-package-X.Y.Z.jar'})})]}),(0,n.jsxs)("tr",{style:{color:"green"},children:[(0,n.jsx)("td",{style:{fontWeight:"bold"},children:"Your updated line"}),(0,n.jsxs)("td",{children:[(0,n.jsx)("mark",{children:(0,n.jsx)(s.code,{children:"su fast2user -c"})}),(0,n.jsx)(s.code,{children:'"$JAVA -Xmx$BROKER_MAX_MEMORY ... -jar fast2-broker-package-X.Y.Z.jar"'})]})]})]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.h5,{id:"material-numeric-2-circle-execution-path",children:":material-numeric-2-circle: Execution path"}),"\n",(0,n.jsxs)(s.p,{children:["Edit the ",(0,n.jsx)(s.code,{children:"ExecStart"})," field from the file ",(0,n.jsx)(s.code,{children:"service/linux/fast2-broker.service"}),": it must point out to the Fast2 installation path."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",metastring:"{2,6}",children:'[Unit]\nDescription=Fast2 Broker vX.Y.Z\n\n[Service]\nEnvironment="JAVA_HOME=/home/JDK/bin/java"\nExecStart=/home/userName/fast2-complete-package-X.Y.Z/startup-broker.sh\nUser=fast2user\nGroup=fast2user\n\n[Install]\nWantedBy=default.target\n'})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"[Unit]"})," section provides metadata and dependencies for the service."]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"Description"}),': Provides a human-readable description of the service. In this case, the service is named "Fast2 Broker".']}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"[Service]"})," section defines how the service behaves when it is started, stopped, or restarted."]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"Environment"}),": Sets environment variables that the service will use during execution."]}),"\n",(0,n.jsxs)(s.p,{children:["This line sets the ",(0,n.jsx)(s.code,{children:"JAVA_HOME"})," environment variable, which is required for the Fast2 Broker service to run. The value is set to ",(0,n.jsx)(s.code,{children:"/home/JDK/java"}),", which should be the path to the Java installation used by the service.\nHowever, the link to Java must be the final link (and not Ubuntu internal link to the Java installation)."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:"ubuntu@ip-...:~/2.11.0$ which java\n/usr/bin/java \u274c\n\nubuntu@ip-...:~/2.11.0$ readlink -f $(which java)\n/usr/lib/jvm/java-11-openjdk-amd64/bin/java \u2705\n"})}),"\n",(0,n.jsxs)(s.p,{children:["The value to set the ",(0,n.jsx)(s.code,{children:"JAVA_HOME"})," environment variable will be, in this case, ",(0,n.jsx)(s.code,{children:'Environment="JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64"'}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"ExecStart"}),": Specifies the command that will be executed to start the service. This line specifies the startup command for the Fast2 Broker service. It points to the ",(0,n.jsx)(s.code,{children:"startup-broker.sh"})," script located in the ",(0,n.jsx)(s.code,{children:"fast2-complete-package-2.0.0"})," directory. When the service starts, this script is executed."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"User"}),": Specifies the user account under which the service will run. This line indicates that the service should be run under the ",(0,n.jsx)(s.code,{children:"fast2-user"})," user account. Running services as a non-root user is a security best practice."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"Group"}),": Specifies the group under which the service will run. This line sets the group ownership for the service process to ",(0,n.jsx)(s.code,{children:"fast2-user"}),". This ensures that the service process has the correct permissions as defined by the user and group."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"[Install]"})," section defines how the service should be installed or integrated with systemd."]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"WantedBy"}),": Specifies the target in which this service should be started. This line indicates that the service should be started as part of the ",(0,n.jsx)(s.code,{children:"default.target"}),", which is the default system runlevel (usually equivalent to multi-user mode or graphical mode, depending on the system configuration)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.h5,{id:"material-numeric-3-circle-symbolic-link",children:":material-numeric-3-circle: Symbolic link"}),"\n",(0,n.jsxs)(s.p,{children:["Now link it to the ",(0,n.jsx)(s.code,{children:"/etc/systemd/system"})," directory through a symbolic link."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:"$ sudo ln -s SOURCE TARGET\n\n$ sudo ln -s service/linux/fast2-broker.service /etc/systemd/system\n"})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsxs)(s.admonition,{type:"tip",children:[(0,n.jsxs)(s.p,{children:["This is the moment where you might want to ",(0,n.jsx)(s.em,{children:"rename"})," the Fast2 service file in case you have multiple instances of Fast2 installed on the same machine.\nFor this,"]}),(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["rename the file ",(0,n.jsx)("span",{style:{color:"red"},children:"FAST2_HOME/services/linux/fast2-broker.service"})," to ",(0,n.jsxs)("span",{style:{color:"green"},children:["FAST2_HOME/services/linux/fast2-broker",(0,n.jsx)("b",{children:"-2.11.0"}),".service"]})," for example"]}),"\n",(0,n.jsxs)(s.li,{children:["run the ",(0,n.jsx)(s.code,{children:"sudo ln -s ..."})," command with the new name, something like","\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:"sudo ln -s service/linux/fast2-broker-2.11.0.service /etc/systemd/system\n"})}),"\n"]}),"\n"]})]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.p,{children:"If the links are broken once they're created, you probably need to put an absolute path for the target as follow ;"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:"$ sudo ln -s /home/userName/fast2-complete-package-2.0.0/service/linux/fast2-broker.service /etc/systemd/system\n"})}),"\n",(0,n.jsx)(s.p,{children:"Next, reload systemd services unit and enable them :"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:"$ sudo systemctl daemon-reload\n$ sudo systemctl enable fast2-broker.service\n"})}),"\n",(0,n.jsx)(s.p,{children:"The terminal should prompt the following message :"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:"Created symlink from /etc/systemd/system/default.target.wants/fast2-broker.service to /etc/systemd/system/fast2-broker.service.\n"})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.h5,{id:"material-numeric-4-circle-script-uses",children:":material-numeric-4-circle: Script uses"}),"\n",(0,n.jsx)(s.p,{children:"Test your script by starting it and then checking the status :"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:"$ sudo service fast2-broker start\n$ service fast2-broker status\n"})}),"\n",(0,n.jsx)(s.p,{children:"or"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:"$ sudo systemctl start fast2-broker.service\n$ systemctl status fast2-broker.service\n"})}),"\n",(0,n.jsx)(s.p,{children:"You can restart or stop the service at anytime with the commands :"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sh",children:"$ service fast2 start | restart | stop | status\n"})}),"\n",(0,n.jsx)(s.h2,{id:"start-fast2-worker",children:"Start Fast2 Worker"}),"\n",(0,n.jsx)(s.p,{children:"The Broker starts an embedded worker by default."}),"\n",(0,n.jsx)(s.p,{children:'=== ":fontawesome-brands-windows: Windows"'}),"\n",(0,n.jsx)(s.p,{children:"If you wish to start multiple workers, just hit :"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-cmd",children:"C:\\path-to-fast2\\> startup-worker.bat\n"})}),"\n",(0,n.jsx)(s.p,{children:'=== ":fontawesome-brands-linux: Linux"'}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"./startup-worker.sh\n"})}),"\n",(0,n.jsxs)(s.p,{children:["If the worker and broker are not booted up on the same machine, you need to setup the Broker host name in the worker configuration file.\nEdit the file ",(0,n.jsx)(s.code,{children:"config/application.properties"})," and modify ",(0,n.jsx)(s.code,{children:"broker.host"})," accordingly."]}),"\n",(0,n.jsx)(s.p,{children:"You can setup Fast2 Worker as a service the same way you did for the Fast2 Broker. For a worker installed on a Windows machine, you need to edit 2 files :"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["The ",(0,n.jsx)(s.code,{children:"Fast2_broker_service.exe"})," file in the ",(0,n.jsx)(s.code,{children:"service/windows"})," folder has to be renamed to ",(0,n.jsx)(s.code,{children:"Fast2_worker_service.exe"})]}),"\n",(0,n.jsxs)(s.li,{children:["The ",(0,n.jsx)(s.code,{children:"Fast2_broker_service.xml"})," file in the ",(0,n.jsx)(s.code,{children:"service/windows"})," folder has to be renamed to ",(0,n.jsx)(s.code,{children:"Fast2_worker_service.xml"})," and requires some changes :","\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["The ",(0,n.jsx)(s.code,{children:"id"})," tag has to be changed to something different than ",(0,n.jsx)(s.code,{children:"Fast2"})," in case the broker has already been installed as a service on this machine. For instance,",(0,n.jsx)(s.code,{children:"Fast2-worker"}),"."]}),"\n",(0,n.jsxs)(s.li,{children:["The ",(0,n.jsx)(s.code,{children:"name"})," tag has to be changed to something different than ",(0,n.jsx)(s.code,{children:"Fast2 Broker"})," to avoid any confusion in case the broker has already been installed as a service on this machine. For instance, ",(0,n.jsx)(s.code,{children:"Fast2 Worker"}),"."]}),"\n",(0,n.jsxs)(s.li,{children:["The ",(0,n.jsx)(s.code,{children:"description"})," tag has to be changed to something different than ",(0,n.jsx)(s.code,{children:"Fast2 Broker vX.Y.Z"})," to avoid any confusion in case the broker has already been installed as a service on this machine. For instance, ",(0,n.jsx)(s.code,{children:"Fast2 Worker vX.Y.Z"}),"."]}),"\n",(0,n.jsxs)(s.li,{children:["The ",(0,n.jsx)(s.code,{children:"executable"})," tag has to be changed to point to the ",(0,n.jsx)(s.code,{children:"startup-worker.bat"})," file which is at Fast2 root level."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"Fast2_worker_service.xml"})," file will look like this :"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-xml",children:'<service>\n    <id>Fast2WorkerDCTM</id>\n    <name>Fast2 Worker DCTM</name>\n    <description>Fast2 Worker DCTM v-2.12.1</description>\n    \x3c!-- Fast2_service lives in service\\windows, rewind 2 levels to find home --\x3e\n    <env name="FAST2_HOME" value="%BASE%\\..\\.." />\n    <executable>%BASE%\\..\\..\\startup-worker.bat</executable>\n    <logpath>%BASE%\\..\\log</logpath>\n    <startmode>Manual</startmode>\n    <log mode="roll-by-size">\n        <sizeThreshold>10240</sizeThreshold>\n        <keepFiles>8</keepFiles>\n    </log>\n</service>\n'})}),"\n",(0,n.jsx)(s.p,{children:"And then, to install the worker as a service :"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-cmd",children:"C:\\path-to-fast2\\service\\windows> Fast2_worker_service.exe install\n"})})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}}}]);